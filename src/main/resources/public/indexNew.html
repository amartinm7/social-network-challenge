<!DOCTYPE html>
<html dir="ltr" class="uk-height-1-1 uk-notouch" lang="en-gb">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Social-network-challenge</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <link rel="shortcut icon" href="https://getuikit.com/v2/docs/images/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" href="https://getuikit.com/v2/docs/images/apple-touch-icon.png">
    <!-- UIkit CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.25/css/uikit.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <!-- UIkit JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.25/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.25/js/uikit-icons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <style>
        div{
            font-family: 'Lora' !important;
            font-size: 17px !important;
            line-height: 1.5 !important;
        }
        h1{
            font-family: 'Lora' !important;
            font-size: 52px !important;
            line-height: 1.3 !important;
        }
        h2 {
            font-family: Lora !important;
        }
        h3 span{
            font-size: 22px !important;
            line-height: 1.4 !important;
            font-family: Lora !important;
            font-weight: 400 !important;
        }
        li{
            font-family: Lora !important;
        }
        input{
            font-family: Lora !important;
        }
        button{
            font-family: Lora !important;
        }
        span{
            font-family: Lora !important;
        }
    </style>
</head>
<body>
<div id="app" class="uk-container">
    <nav class="uk-navbar-container" uk-navbar>
        <div class="uk-navbar-left">
            <ul class="uk-navbar-nav">
                <li class="uk-active"><a href="#">Home</a></li>
                <li><a>Life Style</a></li>
                <li><a>Spots</a></li>
                <li><a>About</a></li>
            </ul>
        </div>
        <div class="uk-navbar-right">
            <ul class="uk-navbar-nav">
                <li><a>Social Network Challenge</a></li>
            </ul>
        </div>
    </nav>
    <!-- signup-->
    <template v-if="show.login">
        <div class="uk-section-default uk-section uk-section-large uk-padding-remove-top">
            <div class="uk-container">
                <div class="uk-grid-margin uk-grid uk-background-norepeat uk-background-cover uk-background-top-right" uk-grid=""
                     data-src="/themes/wordpress/2017/joline/wp-content/themes/yootheme/cache/home-bottom-f0a8d5eb.jpeg"
                     data-srcset="/themes/wordpress/2017/joline/wp-admin/admin-ajax.php?action=kernel&amp;p=theme%2Fimage&amp;src=WyJ3cC1jb250ZW50XC91cGxvYWRzXC9ob21lLWJvdHRvbS5qcGciLFtbImRvUmVzaXplIixbNzY5LDI0Niw3NjksMjQ2XV0sWyJkb0Nyb3AiLFs3NjgsMjQ2LDAsMF1dXV0%3D&amp;hash=e5466b4909bc8e07aafb1305ee8f720d 768w, /themes/wordpress/2017/joline/wp-admin/admin-ajax.php?action=kernel&amp;p=theme%2Fimage&amp;src=WyJ3cC1jb250ZW50XC91cGxvYWRzXC9ob21lLWJvdHRvbS5qcGciLFtbImRvUmVzaXplIixbMTAyNSwzMjgsMTAyNSwzMjhdXSxbImRvQ3JvcCIsWzEwMjQsMzI4LDAsMF1dXV0%3D&amp;hash=f9221ff01ce48f45d0d82f6862bf9d60 1024w, /themes/wordpress/2017/joline/wp-admin/admin-ajax.php?action=kernel&amp;p=theme%2Fimage&amp;src=WyJ3cC1jb250ZW50XC91cGxvYWRzXC9ob21lLWJvdHRvbS5qcGciLFtbImRvUmVzaXplIixbMTM2Niw0MzcsMTM2Niw0MzddXSxbImRvQ3JvcCIsWzEzNjYsNDM3LDAsMF1dXV0%3D&amp;hash=51b7455dc8de433b16496257420986c1 1366w, /themes/wordpress/2017/joline/wp-admin/admin-ajax.php?action=kernel&amp;p=theme%2Fimage&amp;src=WyJ3cC1jb250ZW50XC91cGxvYWRzXC9ob21lLWJvdHRvbS5qcGciLFtbImRvUmVzaXplIixbMTYwMCw1MTIsMTYwMCw1MTJdXSxbImRvQ3JvcCIsWzE2MDAsNTEyLDAsMF1dXV0%3D&amp;hash=ff28525e78278d17a2de73f6951274de 1600w, /themes/wordpress/2017/joline/wp-content/themes/yootheme/cache/home-bottom-126d7192.jpeg 1920w, /themes/wordpress/2017/joline/wp-content/themes/yootheme/cache/home-bottom-f0a8d5eb.jpeg 3000w"
                     data-sizes="(max-aspect-ratio: 3000/960) 313vh" uk-img=""
                     style="background-color: rgb(255, 255, 255); background-image: url(&quot;https://demo.yootheme.com/themes/wordpress/2017/joline/wp-content/themes/yootheme/cache/home-bottom-f0a8d5eb.jpeg&quot;);" >
                    <div class="uk-width-expand@s uk-first-column">
                    </div>
                    <div class="uk-width-expand@s"></div>
                    <div class="uk-width-expand@s"></div>
                    <div class="uk-width-expand@s">
                        <div class="uk-vertical-align-middle uk-text-center uk-height-1-1">
                            <img class="uk-margin-bottom" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkViZW5lXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMTQwcHgiIGhlaWdodD0iMTIwcHgiIHZpZXdCb3g9Ii0yOS41IDI3NS41IDE0MCAxMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgLTI5LjUgMjc1LjUgMTQwIDEyMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8ZyBvcGFjaXR5PSIwLjciPg0KCTxwYXRoIGZpbGw9IiNEOEQ4RDgiIGQ9Ik0tNi4zMzMsMjk4LjY1NHY3My42OTFoOTMuNjY3di03My42OTFILTYuMzMzeiBNNzkuNzg4LDM2NC4zNTVIMS42NTZ2LTU3LjcwOWg3OC4xMzJWMzY0LjM1NXoiLz4NCgk8cG9seWdvbiBmaWxsPSIjRDhEOEQ4IiBwb2ludHM9IjUuODYsMzU4LjE0MSAyMS45NjIsMzQxLjIxNiAyNy45OTUsMzQzLjgyNyA0Ny4wMzIsMzIzLjU2MSA1NC41MjQsMzMyLjUyMyA1Ny45MDUsMzMwLjQ4IA0KCQk3Ni4yMDMsMzU4LjE0MSAJIi8+DQoJPGNpcmNsZSBmaWxsPSIjRDhEOEQ4IiBjeD0iMjQuNDYyIiBjeT0iMzIxLjMyMSIgcj0iNy4wMzQiLz4NCjwvZz4NCjwvc3ZnPg0K" alt="" width="140" height="120">
                            <div class="uk-form-row">
                                <div class="uk-form-controls">
                                    <span v-text="responseMessages.login"></span>
                                    <label class="uk-form-label">&nbsp;</label>
                                    <input type="text" class="uk-input uk-width-1-1" v-model:value="user.username" placeholder="username">
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="uk-form-controls">
                                    <label class="uk-form-label">&nbsp;</label>
                                    <input type="text" class="uk-input uk-width-1-1" v-model:value="user.password" placeholder="password">
                                </div>
                            </div>
                            <div class="uk-width-expand@s" >
                                <label class="uk-form-label">&nbsp;</label>
                                <label class="uk-form-label">&nbsp;</label>
                            </div>
                            <div class="uk-form-row">
                                <div class="uk-form-controls">
                                    <a class="uk-link-text " v-on:click="login">Login</a>
                                    <span>/</span>
                                    <a class="uk-link-text " v-on:click="signup">Signup</a>
                                </div>
                            </div>
                            <div class="uk-width-expand@s" >
                                <label class="uk-form-label">&nbsp;</label>
                                <label class="uk-form-label">&nbsp;</label>
                            </div>
                            <div class="uk-form-row uk-text-small">
                                <a class="uk-link-text uk-link uk-link-muted" href="#">Forgot Password?</a>
                            </div>
                            <div class="uk-width-expand@s" >
                                <label class="uk-form-label">&nbsp;</label>
                            </div>
                          </div>
                    </div>
                </div>
            </div>
        </div>
    </template>
    <!-- end signup -->
    <template v-if="show.contacts">
        <div class="uk-section-default uk-section uk-section-large">
            <div class="uk-container">
                <!-- --------------------text info--------------------------- -->
                <div class="uk-margin-large uk-grid" uk-grid="">
                    <div class="uk-width-3-4@m uk-first-column">
                        <h1 class="uk-heading-primary" > Your friends </h1>
                        <div class="uk-margin uk-text-large" >All your friends are here, in the a common place. Feel free to contact them.
                            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur
                        </div>
                    </div>
                    <div class="uk-width-expand@m">
                    </div>
                </div>
                <!-- ------------------------your friends----------------------- -->
                <template v-if="hasFriends">
                    <div class="uk-grid-margin uk-grid uk-grid-stack" uk-grid="">
                        <div class="uk-width-1-1@m uk-first-column">
                            <div class="uk-margin">
                                <div class="uk-child-width-1-1 uk-child-width-1-2@s uk-child-width-1-4@m uk-grid-medium uk-grid-match uk-grid" uk-grid="">
                                    <template v-for="item in user.friends">
                                        <div class="uk-first-column">
                                            <div class="el-item uk-panel">
                                                <img class="el-image" alt="" src="https://demo.yootheme.com/themes/wordpress/2017/joline/wp-content/themes/yootheme/cache/styles-style-01-b24b5c08.jpeg">
                                                <h2 class="el-title uk-margin uk-h4 uk-margin-remove-adjacent uk-margin-remove-bottom">{{item}}</h2>
                                                <div class="el-meta uk-margin">Developer</div>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="uk-section">
                        <div class="uk-container"></div>
                    </div>
                </template>
                <!-- -----------------------your pending------------------------ -->
                <template v-if="hasRequests">
                    <div class="uk-section-default uk-section uk-section-large uk-padding-remove-top">
                        <div class="uk-container">
                            <div class="uk-grid-margin uk-grid uk-grid-stack" uk-grid="">
                                <div class="uk-width-1-1 uk-first-column">
                                    <h3 class="uk-heading-line">        <span>New Requests, new future friends</span>
                                    </h3>
                                </div>
                            </div>
                            <div class="uk-grid-margin uk-grid uk-grid-stack" uk-grid="">
                                <div class="uk-width-1-1@m uk-first-column">
                                    <div class="uk-margin">
                                        <div class="uk-child-width-1-1 uk-child-width-1-2@s uk-child-width-1-4@m uk-grid-medium uk-grid-match uk-grid" uk-grid="">
                                            <template v-for="item in user.pending">
                                                <div class="uk-first-column">
                                                    <div class="el-item uk-panel">
                                                        <img class="el-image" alt="" src="https://demo.yootheme.com/themes/wordpress/2017/joline/wp-content/themes/yootheme/cache/styles-style-01-b24b5c08.jpeg">
                                                        <div class="uk-align-center" style="align-items: center important!;">
                                                            <span>Decline</span><a v-on:click="declineFriendship(item)" class="uk-icon-button uk-icon-thumbs-down" >D</a>
                                                            <span>&nbsp;</span>
                                                            <a v-on:click="acceptFriendship(item)" class="uk-icon-button uk-icon-thumbs-up">A</a><span>Accept</span>
                                                        </div>
                                                        <h2 class="el-title uk-margin uk-h4 uk-margin-remove-adjacent uk-margin-remove-bottom">{{item}}</h2>
                                                        <div class="el-meta uk-margin">Developer</div>
                                                    </div>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
                <!-- ---------------------------extra info-------------------- -->
                <div class="uk-section-default uk-section uk-section-large uk-padding-remove-top">
                    <div class="uk-container">
                        <div class="uk-grid-margin uk-grid uk-grid-stack" uk-grid="">
                            <div class="uk-width-1-1 uk-first-column">
                                <h3 class="uk-heading-line">        <span>In the world</span>
                                </h3>
                            </div>
                        </div>
                        <div class="uk-grid-margin uk-grid" uk-grid="">
                            <div class="uk-width-expand@s uk-first-column"></div>
                            <div class="uk-width-expand@s">
                                <h3 class="uk-text-left@s uk-text-center uk-h4"> About us </h3>
                                <ul class="uk-text-left@s uk-text-center uk-list">        <li class="el-item">
                                    <div class="el-content uk-text-muted">Company</div></li>
                                    <li class="el-item">
                                        <div class="el-content uk-text-muted">Location
                                        </div></li>
                                    <li class="el-item">
                                        <div class="el-content uk-text-muted">Culture</div></li>
                                    <li class="el-item">
                                        <div class="el-content uk-text-muted">Open positions/Jobs</div></li>
                                </ul>
                            </div>
                            <div class="uk-width-expand@s">
                                <h3 class="uk-text-left@s uk-text-center uk-h4"> Contact us</h3>
                                <ul class="uk-text-left@s uk-text-center uk-list">        <li class="el-item">
                                    <div class="el-content uk-text-muted">twiteer</div></li>
                                    <li class="el-item">
                                        <div class="el-content uk-text-muted">em@il
                                        </div></li>
                                    <li class="el-item">
                                        <div class="el-content uk-text-muted">Phone</div></li>
                                </ul>
                            </div>
                            <div class="uk-width-expand@s">
                                <h3 class="uk-text-left@s uk-text-center uk-h4">Invite to your friends</h3>
                                <div class="uk-vertical-align-middle uk-text-center uk-height-1-1">
                                    <div class="uk-form-row">
                                        <div class="uk-form-controls">
                                            <input v-model="usernameTo" type="text" placeholder="username" class="uk-input uk-width-1-1">
                                        </div>
                                    </div>
                                    <div class="uk-width-expand@s" >
                                        <label class="uk-form-label">&nbsp;</label>
                                        <label class="uk-form-label">&nbsp;</label>
                                    </div>
                                    <div class="uk-form-row">
                                        <div class="uk-form-controls">
                                            <textarea class="uk-textarea" id="form-h-t" cols="100" rows="3" placeholder="hi mate, accept my request to keep in touch"></textarea>
                                        </div>
                                    </div>
                                    <div class="uk-width-expand@s" >
                                        <label class="uk-form-label">&nbsp;</label>
                                        <label class="uk-form-label">&nbsp;</label>
                                    </div>
                                    <div class="uk-form-row">
                                        <div class="uk-form-controls">
                                            <a class="uk-link-text" v-on:click="requestFriendship">Submit</a>
                                        </div>
                                    </div>
                                    <div class="uk-width-expand@s" >
                                        <label class="uk-form-label">&nbsp;</label>
                                        <label class="uk-form-label">&nbsp;</label>
                                    </div>
                                    <div class="uk-form-row">
                                        <div class="uk-form-controls">
                                            <span class="uk-h6 uk-margin-remove uk-text-right">{{responseMessages.requestFriendship}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </template>
</div>
</body>
</html>
<script>
  var app = new Vue({
    el: '#app',
    data: {
      usernameTo: '',
      user:{
        username: "username",
        password: "password",
        friends: [],
        pending: []
      },
      url:{
        login: '/login',
        signup: '/signup',
        requestFriendship: '/friendship/request',
        acceptFriendship: '/friendship/accept',
        declineFriendship: '/friendship/decline',
        listFriends: '/friendship/list',
        listPending: '/friendship/pending'
      },
      responseMessages: {
        login: "",
        requestFriendship: "",
        acceptFriendship: "",
        declineFriendship: ""
      },
      show: {
        login: true,
        contacts: false
      }
    },
    computed: {
      urlSignupWithParams: function(){
        return `${this.url.signup}?username=${this.user.username}`;
      },
      urlLoginWithParams: function(){
        return `${this.url.login}?username=${this.user.username}&password=${this.user.password}`;
      },
      urlRequestWithParams: function() {
        return `${this.url.requestFriendship}?usernameFrom=${this.user.username}&usernameTo=${this.usernameTo}`
      },
      urlListWithParams: function() {
        return `${this.url.listFriends}?username=${this.user.username}`
      },
      urlListPendingWithParams: function() {
        return `${this.url.listPending}?username=${this.user.username}`
      },
      hasFriends: function () {
        return this.user.friends.length > 0
      },
      hasRequests: function () {
        return this.user.pending.length > 0
      }
    },
    methods: {
      urlAcceptWithParams: function(usernameTo) {
        return `${this.url.acceptFriendship}?usernameFrom=${this.user.username}&usernameTo=${usernameTo}`
      },
      urlDeclineWithParams: function(usernameTo) {
        return `${this.url.declineFriendship}?usernameFrom=${this.user.username}&usernameTo=${usernameTo}`
      },
      reloadModel(){
        this.listFriends()
        this.listPendingFriends()
      },
      login: function(){
        const self = this
        const headers = {
          'Content-Type': 'application/json',
          'X-Password': this.user.password,
          "Access-Control-Allow-Origin": "*"
        }

        const axiosInstance = axios.create({
          timeout: 3000,
          headers: headers
        })

        axiosInstance.get( this.urlLoginWithParams )
          .then(function(response){
            console.log(JSON.stringify(response.data))
            self.user.friends = response.data
            self.show.login = false
            self.show.contacts = true
            self.reloadModel()
          }).catch( function(error) {
          console.log(error)
          self.responseMessages.login = error.response.data.message
        })
      },
      signup: function () {
        const self = this
        const headers = {
          'Content-Type': 'application/json',
          'X-Password': this.user.password,
          "Access-Control-Allow-Origin": "*"
        }

        const axiosInstance = axios.create({
          timeout: 3000,
          headers: headers
        })

        axiosInstance.post( this.urlSignupWithParams )
          .then(function(response){
            self.responseMessages.login = "Success, user created properly"
            console.log(JSON.stringify(response.data))
            self.login()
          }).catch( function(error) {
          self.responseMessages.login = error.response.data.message
          console.log(error)
        })
      },
      requestFriendship: function() {
        const self = this

        const headers = {
          'Content-Type': 'application/json',
          'X-Password': this.user.password,
          "Access-Control-Allow-Origin": "*"
        }

        const axiosInstance = axios.create({
          timeout: 3000,
          headers: headers
        })

        axiosInstance.post(this.urlRequestWithParams)
          .then(function (response) {
            console.log(JSON.stringify(response.data))
            self.responseMessages.requestFriendship = "The invitation was sent properly"
          }).catch(function (error) {
          console.log(error)
          self.responseMessages.requestFriendship = error.response.data.message
        })

      },
      acceptFriendship: function(userTo) {
        const self = this
        const headers = {
          'Content-Type': 'application/json',
          'X-Password': this.user.password,
          "Access-Control-Allow-Origin": "*"
        }

        const axiosInstance = axios.create({
          timeout: 3000,
          headers: headers
        })

        axiosInstance.post( this.urlAcceptWithParams(userTo) )
          .then(function(response){
            console.log(JSON.stringify(response.data))
            self.responseMessages.acceptFriendship = "The accepted invitation"
            self.reloadModel()
          }).catch( function(error) {
          console.log(error)
          self.responseMessages.acceptFriendship = error.response.data.message
        })
      },
      declineFriendship: function(userTo) {
        const self = this
        const headers = {
          'Content-Type': 'application/json',
          'X-Password': this.user.password,
          "Access-Control-Allow-Origin": "*"
        }

        const axiosInstance = axios.create({
          timeout: 3000,
          headers: headers
        })

        axiosInstance.post( this.urlDeclineWithParams(userTo) )
          .then(function(response){
            console.log(JSON.stringify(response.data))
            self.responseMessages.declineFriendship = "Declining the invitation"
            self.reloadModel()
          }).catch( function(error) {
          console.log(error)
          self.responseMessages.declineFriendship = error.response.data.message
        })
      },
      listFriends: function() {
        const self = this
        const headers = {
          'Content-Type': 'application/json',
          'X-Password': this.user.password,
          "Access-Control-Allow-Origin": "*"
        }

        const axiosInstance = axios.create({
          timeout: 3000,
          headers: headers
        })

        axiosInstance.get( this.urlListWithParams )
          .then(function(response){
            console.log(JSON.stringify(response.data))
            self.user.friends = response.data
          }).catch( function(error) {
          console.log(error)
        })
      },
      listPendingFriends: function() {
        const self = this
        const headers = {
          'Content-Type': 'application/json',
          'X-Password': this.user.password,
          "Access-Control-Allow-Origin": "*"
        }

        const axiosInstance = axios.create({
          timeout: 3000,
          headers: headers
        })

        axiosInstance.get( this.urlListPendingWithParams )
          .then(function(response){
            console.log(JSON.stringify(response.data))
            self.user.pending = response.data
          }).catch( function(error) {
          console.log(error)
        })
      }
    },
    mounted () {
      self = this
      console.log('Application started')
      console.log(`hasFriends: ${this.hasFriends}, hasRequests: ${this.hasRequests}`)
      // self.show.login = true
      // self.show.contacts = true
      // self.user.friends = ['username1','username2','username3','username4', 'username5' ,'username6' ,'username7' ,'username8']
      // self.user.pending = ['username1','username2','username3','username4']
    }
  })
</script>